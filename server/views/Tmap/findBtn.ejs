<script type="text/javascript">
  function findBtnSuccess(response) {
    const resultData = response.features;
    localStorage.setItem("routeData", JSON.stringify(resultData));
    for (var i in resultData) {
      //for문 [S]
      var geometry = resultData[i].geometry;
      var properties = resultData[i].properties;

      if (geometry.type == "LineString") {
        for (var j in geometry.coordinates) {
          console.log(
            "lat : ",
            geometry.coordinates[j][1],
            "lng : ",
            geometry.coordinates[j][0]
          );
          // 포인트객체의 정보로 좌표값 변환 객체로 저장
          var latlng = new Tmapv2.LatLng(
            geometry.coordinates[j][1],
            geometry.coordinates[j][0]
          );
          // 배열에 담기
          drawInfoArr.push(latlng);
        }
        drawLine(drawInfoArr, "0");
      } else {
        var markerImg = "";
        var pType = "";

        if (properties.pointType == "S") {
          //출발지 마커
          markerImg =
            "http://tmapapis.sktelecom.com/upload/tmap/marker/pin_r_m_s.png";
          pType = "S";
        } else if (properties.pointType == "E") {
          //도착지 마커
          markerImg =
            "http://tmapapis.sktelecom.com/upload/tmap/marker/pin_r_m_e.png";
          pType = "E";
        } else {
          //각 포인트 마커
          markerImg = "http://topopen.tmap.co.kr/imgs/point.png";
          pType = "P";
        }

        const routeInfoObj = {
          markerImage: markerImg,
          lng: geometry.coordinates[0],
          lat: geometry.coordinates[1],
          pointType: pType,
        };

        // Marker 추가
        addMarkers(routeInfoObj);
      }
    } //for문 [E]
  }
</script>
